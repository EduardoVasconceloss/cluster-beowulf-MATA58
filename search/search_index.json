{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Script para Cluster Beowulf","text":"<p>Bem vindo! Nessa documenta\u00e7\u00e3o irei te ensinar como voc\u00ea pode realizar atividades em um cluster beowulf de maneira mais \"automatizada\" atrav\u00e9s de um script em bash.</p>"},{"location":"#configure-o-arquivo-hosts-da-sua-maquina","title":"Configure o arquivo hosts da sua m\u00e1quina","text":"<p>Na sua m\u00e1quina, voc\u00ea deve declarar quem \u00e9 o node1 e quem \u00e9 o node2 e atribuir um IP para eles. Para fazer isso voc\u00ea deve alterar o arquivo <code>hosts</code>, para isso, execute o seguinte comando:</p> <pre><code>nano /etc/hosts\n</code></pre> <p>Agora voc\u00ea pode modificar o arquivo, use meu arquivo hosts como refer\u00eancia.</p> <pre><code>127.0.0.1       localhost\n127.0.1.1       node1  \n10.0.0.12       node2\n\n# The following lines are desirable for IPv6 capable hosts\n::1     localhost ip6-localhost ip6-loopback\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n\n# LEMBRE-SE! Mude os IPs e os hostnames de acordo com sua necessidade, um IP e hostname que sirvam para mim podem n\u00e3o servir para voc\u00ea e vice-versa.\n</code></pre>"},{"location":"#vamos-criar-uma-chave-ssh-para-podemos-conectar-nosso-cluster","title":"Vamos criar uma chave SSH para podemos conectar nosso cluster.","text":"<p>Antes de tudo, voc\u00ea deve mudar uma linha em um arquivo de configura\u00e7\u00e3o do Debian executando o seguinte comando:</p> <pre><code>nano /etc/ssh/sshd_config\n\n# Altere a linha que cont\u00e9m \"PermitRootLogin\", ela deve ficar desse jeito:\nPermitRootLogin yes\n</code></pre> <p>Para aplicar as altera\u00e7\u00f5es feitas, reinicie o servi\u00e7o <code>sshd</code>, voc\u00ea pode usar o comando <code>sudo systemctl reboot</code></p> <p>Para a conex\u00e3o do cluster funcionar, precisamos da chave SSH. Somente assim as m\u00e1quinas poder\u00e3o comunicar-se entre si com seguran\u00e7a e agilidade. Execute o seguinte comando nos dois nodes para gerar a chave SSH:</p> <pre><code>ssh-keygen\n# Agora \u00e9 s\u00f3 dar enter at\u00e9 cansar\n</code></pre> <p>Ap\u00f3s isso, vamos criar um arquivo de configura\u00e7\u00e3o ssh nos dois nodes para automatizar a \"passagem\" das chaves SSH de um node para o outro Execute esse comando:</p> <pre><code>nano ~/.ssh/config\n</code></pre> <p>Certo, falta colocar as configura\u00e7\u00f5es dentro do arquivo, ent\u00e3o copie e cole as informa\u00e7\u00f5es abaixo:</p> <pre><code>Host node1\n    Hostname node1\n    User root\nHost node2\n    Hostname node2\n    User root\n\n# LEMBRE-SE! Mude o 'hostname' de acordo com sua necessidade\n</code></pre> <p>Al\u00e9m disso, mude as permiss\u00f5es do arquivo de configura\u00e7\u00e3o nos dois nodes:</p> <pre><code>chmod 600 ~/.ssh/config\n</code></pre> <p>Por fim, execute esses comandos, nos dois nodes, para \"enviar\" a chave ssh de um node para o outro:</p> <pre><code>ssh-copy-id node1\nssh-copy-id node2\n</code></pre>"},{"location":"#baixando-o-nosso-clustersh","title":"Baixando o nosso cluster.sh","text":"<p>Baixe o arquivo \"cluster.sh\" que pode ser encontrado no reposit\u00f3rio desse trabalho no github, atrav\u00e9s desse reposit\u00f3rio. Voc\u00ea tamb\u00e9m pode clonar o reposit\u00f3rio para ter acesso a esse script:</p> <pre><code>sudo apt install git\ngit clone https://github.com/EduardoVasconceloss/cluster-beowulf-MATA58.git\n</code></pre>"},{"location":"#funcionalidades-do-clustersh","title":"Funcionalidades do cluster.sh","text":"<p>O nosso cluster tem 7 funcionalidades, sendo elas:</p> <ul> <li> <p><code>mostrar</code>: fun\u00e7\u00e3o que executa o comando <code>ls</code></p> </li> <li> <p><code>copiar</code>: fun\u00e7\u00e3o que executa o comando <code>cp</code></p> </li> <li> <p><code>mover</code>: fun\u00e7\u00e3o que executa o comando <code>mv</code></p> </li> <li> <p><code>definir_permissoes</code>: fun\u00e7\u00e3o que executa o comando <code>chmod</code></p> </li> <li> <p><code>criar_usuario</code>: fun\u00e7\u00e3o que executa o comando <code>useradd</code></p> </li> <li> <p><code>criar_grupo</code>: fun\u00e7\u00e3o que executa o comando <code>groupadd</code></p> </li> <li> <p><code>deletar</code>: fun\u00e7\u00e3o que executa o comando <code>rm</code></p> </li> </ul>"},{"location":"#executando-o-nosso-clustersh","title":"Executando o nosso cluster.sh","text":"<p>Para executar o cluster, voc\u00ea deve executar o script:</p> <pre><code>./cluster.sh\n</code></pre> <p>Caso o cluster n\u00e3o esteja executando, voc\u00ea pode tentar mudar as permiss\u00f5es do arquivo:</p> <pre><code>chmod +x cluster.sh\n</code></pre> <p>Obs: O comando s\u00f3 ser\u00e1 executado em um node caso seja executado nos dois. Se um arquivo n\u00e3o puder ser exlu\u00eddo no node1, ele n\u00e3o ser\u00e1 exclu\u00eddo em nenhum node.</p> <p>Ao executar o cluster, ir\u00e1 aparecer uma linha com a informa\u00e7\u00e3o \"Digite um comando: \", agora voc\u00ea tem sete op\u00e7\u00f5es de comandos para executar.</p> <ul> <li>mostrar: Para executar a funcionalidade <code>mostrar</code>, rode um comando com essa estrutura:</li> </ul> <pre><code>mostrar /caminho/para/o/arquivo\n</code></pre> <ul> <li>copiar: Para executar a funcionalidade <code>copiar</code>, rode um comando com essa estrutura:</li> </ul> <pre><code>copiar /caminho/de/origem/para/o/arquivo/ /caminho/de/destino/para/o/arquivo\n\n# Voc\u00ea tamb\u00e9m pode mover pastas\nmover -r /caminho/de/origem/para/a/pasta/ /caminho/de/destino/para/a/pasta/\n</code></pre> <ul> <li>mover: Para executar a funcionalidade <code>mover</code>, rode um comando com essa estrutura:</li> </ul> <pre><code>mover /caminho/de/origem/para/o/arquivo/ /caminho/de/destino/para/o/arquivo\n\n# Voc\u00ea tamb\u00e9m pode mover pastas\nmover -r /caminho/de/origem/para/a/pasta/ /caminho/de/destino/para/a/pasta/\n</code></pre> <ul> <li>definir_permissoes: Para executar a funcionalidade <code>definir_permissoes</code>, rode um comando com essa estrutura:</li> </ul> <pre><code>definir_permissoes +x /caminho/para/o/arquivo\n</code></pre> <ul> <li>criar_usuario: Para executar a funcionalidade <code>criar_usuario</code>, rode um comando com essa estrutura:</li> </ul> <p><code>bash   criar_usuario seu_nome</code></p> <ul> <li>criar_grupo: Para executar a funcionalidade <code>criar_grupo</code>, rode um comando com essa estrutura:</li> </ul> <pre><code>criar_grupo seu_grupo\n</code></pre> <ul> <li>deletar: Para executar a funcionalidade <code>deletar</code>, rode um comando com essa estrutura:</li> </ul> <p><code>bash   deletar /caminho/para/o/arquivo</code></p>"}]}